<!doctype html>
<title>Homework 1 (HTML) - CS 3550</title>
<meta charset="UTF-8"></meta>
<link rel="icon" href="/static/favicon.ico"></link>
<link rel="stylesheet" href="/static/main.css">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&family=IBM+Plex+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&display=swap" rel="stylesheet">

{% include 'header.html' %}

<!--Assignment Content-->
<main>
    {% if error_message %}
    <div class="error-messages">
        <output>{{ error_message }}</output>
    </div>
    {% endif %}

    <div>
        <h1>{{ title }}</h1>
        <p>Due {{ deadline }}, total of {{ points }} point{{ points|pluralize }}<p>
        
        <!--Submission Card-->
        {% if user_role == 'student' %}
        <section>

            {% if grade_status == 'Graded' %}
                <p>Your submission, <a href="{{ user_submissions.first.file.url }}" title="View Submission">{{ user_submissions.first.file.name }}</a>, received {{earned_points}}/{{available_points}} points ({{score}}%)</p>
            {% endif %}

            {% if grade_status == 'Ungraded' and due_status == 'Overdue' %}
            <p>Your submission, <a href="{{ user_submissions.first.file.url }}" title="View Submission">{{ user_submissions.first.file.name }}</a>, is being graded.</p>
            {% endif %}

            {% if grade_status == 'Ungraded' and due_status == 'Not Due'%}
            <p>Your current submission is <a href="{{ user_submissions.first.file.url }}" title="View Submission">{{ user_submissions.first.file.name }}</a></p>
            {% endif %}

            {% if not user_submissions.exists and due_status == "Not Due"%}
            <p>No current submission</p>
            {% endif %}

            {% if grade_status == 'Missing' %}
            <p>You did not submit this assignment and received 0 points</p>
            {% endif %}

                {% if due_status == "Not Due" %}
                <form action="{% url 'assignment' assignment_id %}" method="post" enctype="multipart/form-data">
                    {% csrf_token %}
                    <input type="file" name="file" accept="application/pdf">
                    <input type="submit" value="Submit">
                </form>
                {% endif %}
        </section>
        {% endif %}
        
        <!--Grading Card-->
        {% if user_role == "ta" or user_role == "admin" %}
        <section>
            <p>Currently {{ submissions }}/{{ student_count }} submissions</p>
            <div>
                {% if user_role == "ta" %}
                <p>{{ submissions_assigned }} submission{{ submissions|pluralize }} assigned to you</p>
                {% elif user_role == "admin" %}
                {% endif %}        
                <a href="submissions/" title="Submissions" role="button">Grade</a>      
            </div>
            
        </section>
        {% endif %}

        <h4>Description</h4>
        {{ description | safe}}
    </div>
</main>
